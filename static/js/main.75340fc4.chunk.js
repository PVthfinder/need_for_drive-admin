(this["webpackJsonpneed_for_drive-admin"]=this["webpackJsonpneed_for_drive-admin"]||[]).push([[0],{32:function(e,t,r){},33:function(e,t,r){},35:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(16),c=r.n(a),s=r(5),i=r(19),o=r(2),l="LOGIN_CHANGE_EMAIL_TEXT",u="LOGIN_CHANGE_PASSWORD_TEXT",d="LOGIN_SET_EMAIL_ERROR",j="LOGIN_SET_PASSWORD_ERROR",h="LOGIN_SET_IS_NO_REGISTER",b="LOGIN_SET_IS_AUTH_ERROR",p="USER_LOGIN",O="USER_CHECK",_="USER_LOGOUT",f="REQUEST_ERROR_SET_ERROR",m="REQUEST_ERROR_UNSET_ERROR",v={email:{emailValue:"",isEmailError:!1},password:{passwordValue:"",isPasswordError:!1},isNoRegister:!1,isAuthError:!1},g={isLogged:!1,name:""},x={isError:!1,errorStatus:""},w=Object(i.a)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{email:Object(o.a)(Object(o.a)({},e.email),{},{emailValue:t.payload})});case d:return Object(o.a)(Object(o.a)({},e),{},{email:Object(o.a)(Object(o.a)({},e.email),{},{isEmailError:t.payload})});case u:return Object(o.a)(Object(o.a)({},e),{},{password:Object(o.a)(Object(o.a)({},e.password),{},{passwordValue:t.payload})});case j:return Object(o.a)(Object(o.a)({},e),{},{password:Object(o.a)(Object(o.a)({},e.password),{},{isPasswordError:t.payload})});case h:return Object(o.a)(Object(o.a)({},e),{},{isNoRegister:t.payload});case b:return Object(o.a)(Object(o.a)({},e),{},{isAuthError:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(o.a)(Object(o.a)({},e),{},{isLogged:!0});case O:return Object(o.a)(Object(o.a)({},e),{},{isLogged:!0,name:t.payload});case _:return Object(o.a)(Object(o.a)({},e),{},{isLogged:!1,name:""});default:return e}},requestError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(o.a)(Object(o.a)({},e),{},{isError:!0,errorStatus:t.payload});case m:default:return e}}}),E=Object(i.b)(w),N=(r(32),r(11)),y=r(4),V=function(e){return{type:O,payload:e}},R=r(10),k=r.n(R),C=function(e){return{type:d,payload:e}},S=function(e){return{type:j,payload:e}},L=function(e){return{type:h,payload:e}},H=function(e){return{type:b,payload:e}},I=(r(33),r(1));function T(e){var t=e.type,r=e.inputValue,n=e.setInputValue,a=e.label,c=e.placeholder,s=e.isError,i=e.setIsError,o=k()("input_field__value",{is_error:s}),l=k()("input_field__error",{active:s});return Object(I.jsxs)("div",{className:"input_field",children:[Object(I.jsx)("label",{htmlFor:"input_".concat(a),children:a}),Object(I.jsxs)("div",{className:o,children:[Object(I.jsx)("input",{type:t,name:a,id:"input_".concat(a),placeholder:c,value:r,onChange:function(e){return t=e.target.value,n(t),void(t.length&&i&&i(!1));var t}}),Object(I.jsx)("div",{className:l,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})]})]})}T.defaultProps={type:"",inputValue:"",setInputValue:null,label:"",placeholder:"",isError:!1,setIsError:null};var A=T,M=r(18);r(35);function Z(e){var t=e.type,r=e.title,n=e.color,a=e.location,c=e.onclick,s=k()("btn","btn--".concat(a),Object(M.a)({},"btn--".concat(n),n));return Object(I.jsx)("input",{type:t,value:r,className:s,onClick:c})}Z.defaultProps={type:"",title:"",color:"",location:"",onclick:null};var B=Z,G=r(12),P=r.n(G),D=r(15),U="4cbcea96de",F="https://api-factory.simbirsoft1.com",q="".concat(F,"/api/auth/login"),J="".concat(F,"/api/auth/check"),X=("".concat(F,"/api/auth/logout"),{"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"}),z="QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890";function K(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="";t.length<=e;)t+=z[Math.floor(Math.random()*z.length)];return t}function Q(e,t){var r=t.headers?Object(o.a)(Object(o.a)({},t.headers),e):e;return Object(o.a)({headers:r},t)}var W=function(){var e=Object(D.a)(P.a.mark((function e(t){var r,n,a,c,s=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=Q(X,r),e.prev=2,e.next=5,fetch(t,n);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c: ",e.t0),e.abrupt("return",Promise.reject(new Error(e.t0.message)));case 12:if(a.ok){e.next=17;break}return e.next=15,a.text();case 15:return c=e.sent,e.abrupt("return",Promise.reject({httpStatus:a.status,httpText:c}));case 17:return e.abrupt("return",a.json());case 18:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();function Y(){return(Y=Object(D.a)(P.a.mark((function e(t,r){var n,a,c,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K(5,!0),a=window.btoa("".concat(n,":").concat(U)),c={headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(a)},body:JSON.stringify({username:t,password:r}),method:"POST"},e.next=5,W(q,c);case 5:return s=e.sent,e.abrupt("return",{access_token:s.access_token,refresh_token:s.refresh_token});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(D.a)(P.a.mark((function e(t){var r,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"Bearer ".concat(t)}},e.next=3,W(J,r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=r.p+"static/media/logo_icon.bc4f3ee8.svg";r(37);var re=function(){var e=Object(s.c)((function(e){return e.login})),t=e.email,r=e.password,a=e.isNoRegister,c=e.isAuthError,i=Object(s.b)(),o=k()("login_form__register_error",{active:a}),d=k()("login_form__auth_error",{active:c});return Object(n.useEffect)((function(){a&&setTimeout((function(){i(L(!1))}),2e3)}),[a]),Object(n.useEffect)((function(){c&&setTimeout((function(){i(H(!1))}),3e3)}),[c]),Object(I.jsxs)("div",{className:"login",children:[Object(I.jsxs)("div",{className:"login__head",children:[Object(I.jsx)("div",{className:"login__icon",children:Object(I.jsx)("img",{src:te,alt:"icon"})}),Object(I.jsx)("h1",{className:"login__heading",children:"Need for drive"})]}),Object(I.jsxs)("form",{className:"login_form",children:[Object(I.jsx)("h2",{className:"login_form__heading",children:"\u0412\u0445\u043e\u0434"}),Object(I.jsx)(A,{type:"text",inputValue:t.emailValue,setInputValue:function(e){i(function(e){return{type:l,payload:e}}(e))},label:"\u041f\u043e\u0447\u0442\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",isError:t.isEmailError,setIsError:function(e){i(C(e))}}),Object(I.jsx)(A,{type:"password",inputValue:r.passwordValue,setInputValue:function(e){i(function(e){return{type:u,payload:e}}(e))},label:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",isError:r.isPasswordError,setIsError:function(e){i(S(e))}}),Object(I.jsxs)("div",{className:"login_form__btns",children:[Object(I.jsx)("a",{href:"#!",className:"login_form__register",onClick:function(e){e.preventDefault(),i(L(!0))},children:"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(I.jsx)("div",{className:o,children:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430..."}),Object(I.jsx)(B,{type:"button",title:"\u0412\u043e\u0439\u0442\u0438",onclick:function(e){e.preventDefault(),t.emailValue.length||i(C(!0)),r.passwordValue.length||i(S(!0)),t.emailValue.length&&r.passwordValue.length&&function(e,t){return Y.apply(this,arguments)}(t.emailValue,r.passwordValue).then((function(e){e.access_token&&localStorage.setItem("access_token",e.access_token),e.refresh_token&&localStorage.setItem("refresh_token",e.refresh_token),i({type:p}),$(e.access_token).then((function(e){return i(V(e.username))}))})).catch((function(e){401===e.httpStatus&&(console.error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c! ",e),i(H(!0)))}))}})]}),Object(I.jsx)("div",{className:d,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"})]})]})},ne=r(23),ae=r.p+"static/media/avatar.ee177700.jpg";r(38);var ce=function(){var e=Object(n.useState)(""),t=Object(ne.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(!1),i=Object(ne.a)(c,2),o=i[0],l=i[1],u=Object(s.c)((function(e){return e.user})).name,d=Object(s.b)(),j=k()("user_account__dropdown_icon",{active:o}),h=k()("user_account__dropdown_menu","dropdown_menu",{active:o}),b=function(){l((function(e){return!e}))};return Object(I.jsxs)("header",{className:"page_header",children:[Object(I.jsxs)("div",{className:"page_header__search search",children:[Object(I.jsx)("span",{className:"search__search_btn",children:Object(I.jsx)("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(I.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.87336 8.80503H10.5057L14.5 12.8073L13.3073 14L9.30503 10.0057V9.37336L9.08891 9.14923C8.17639 9.93368 6.99171 10.4059 5.70297 10.4059C2.82933 10.4059 0.5 8.07662 0.5 5.20297C0.5 2.32933 2.82933 0 5.70297 0C8.57662 0 10.9059 2.32933 10.9059 5.20297C10.9059 6.49171 10.4337 7.67639 9.64923 8.58891L9.87336 8.80503ZM2.19702 5.30302C2.19702 7.29837 3.80773 8.90908 5.80308 8.90908C7.79844 8.90908 9.40914 7.29837 9.40914 5.30302C9.40914 3.30767 7.79844 1.69696 5.80308 1.69696C3.80773 1.69696 2.19702 3.30767 2.19702 5.30302Z",fill:"#CACEDB"})})}),Object(I.jsx)(A,{type:"search",inputValue:r,setInputValue:a,placeholder:"\u041f\u043e\u0438\u0441\u043a ..."})]}),Object(I.jsxs)("div",{className:"page_header__notifications notifications",children:[Object(I.jsx)("span",{className:"notifications__icon",children:Object(I.jsx)("svg",{width:"18",height:"21",viewBox:"0 0 18 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(I.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.375 9.04949V14.3727L17.5 16.502V17.5667H0.5V16.502L2.625 14.3727V9.04949C2.625 5.77038 4.35687 3.04489 7.40625 2.32093V1.59697C7.40625 0.713313 8.11812 0 9 0C9.88188 0 10.5938 0.713313 10.5938 1.59697V2.32093C13.6325 3.04489 15.375 5.78103 15.375 9.04949ZM11.2667 18.7C11.2667 19.9467 10.2467 20.9667 9 20.9667C7.742 20.9667 6.73334 19.9467 6.73334 18.7H11.2667Z",fill:"#818EA3"})})}),Object(I.jsx)("div",{className:"notifications__count",children:"2"})]}),Object(I.jsxs)("div",{className:"page_header__user user_account",onClick:b,onKeyDown:b,role:"button",tabIndex:"0","aria-label":"dropdown menu",children:[Object(I.jsx)("img",{className:"user_account__avatar",src:ae,alt:"user_avatar"}),Object(I.jsx)("span",{className:"user_account__name",children:u}),Object(I.jsx)("span",{className:j}),Object(I.jsx)("div",{className:h,children:Object(I.jsx)("ul",{className:"dropdown_menu__list",children:Object(I.jsx)("li",{className:"dropdown_menu__item",children:Object(I.jsx)("a",{href:"#!",onClick:function(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),d({type:_})},children:"\u0412\u044b\u0445\u043e\u0434"})})})})]})]})};r(39);var se=function(){return Object(I.jsxs)("footer",{className:"page_footer",children:[Object(I.jsxs)("div",{className:"page_footer__links",children:[Object(I.jsx)(N.b,{to:"/admin",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}),Object(I.jsx)("a",{href:"https://github.com/PVthfinder",target:"_blank",rel:"noreferrer",children:"GitHub"})]}),Object(I.jsxs)("div",{className:"page_footer__copyright",children:["Copyright \xa9 ",(new Date).getFullYear()," Simbirsoft"]})]})};function ie(e){var t=e.img,r=e.path,n=e.title;return Object(I.jsxs)(N.b,{to:r,className:"menu__item",children:[t,n]})}ie.defaultProps={img:"",path:"",title:""};var oe=ie,le=[{title:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",path:"/admin/cars/:id",img:Object(I.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(I.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3213 2.10853C11.5596 2.34683 11.5596 2.73177 11.3213 2.97007L10.2031 4.08825L7.91174 1.7969L9.02992 0.678725C9.26822 0.440425 9.65317 0.440425 9.89147 0.678725L11.3213 2.10853ZM0.5 11.5V9.20865L7.25795 2.4507L9.5493 4.74205L2.79135 11.5H0.5Z",fill:"#007BFF"})})},{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u0432\u0442\u043e",path:"/admin/cars",img:Object(I.jsx)("svg",{width:"13",height:"10",viewBox:"0 0 13 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(I.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5V1.85714H5.83333V0.5H0.5ZM5.83333 4.57142H0.5V3.21428H5.83333V4.57142ZM0.5 7.28572H5.83333V5.92857H0.5V7.28572ZM0.5 10H5.83333V8.64285H0.5V10ZM12.5 0.5H7.16663V10H12.5V0.5Z",fill:"#CACEDB"})})},{title:"\u0417\u0430\u043a\u0430\u0437\u044b",path:"/admin/orders",img:Object(I.jsx)("svg",{width:"9",height:"10",viewBox:"0 0 9 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(I.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 0H1.5C0.95 0 0.505 0.45 0.505 1L0.5 9C0.5 9.55 0.945 10 1.495 10H7.5C8.05 10 8.5 9.55 8.5 9V3L5.5 0ZM6.5 7H5V8.5H4V7H2.5V6H4V4.5H5V6H6.5V7ZM5 0.75V3.5H7.75L5 0.75Z",fill:"#CACEDB"})})}];r(42);var ue=function(){return Object(I.jsxs)("div",{className:"menu",children:[Object(I.jsxs)(N.b,{to:"/admin",className:"menu__head",children:[Object(I.jsx)("div",{className:"menu__icon",children:Object(I.jsx)("img",{src:te,alt:"icon"})}),Object(I.jsx)("h1",{className:"menu__heading",children:"Need for drive"})]}),Object(I.jsx)("div",{className:"menu__items",children:le.map((function(e){return Object(I.jsx)(oe,{img:e.img,path:e.path,title:e.title},e.title)}))})]})};r(43);var de=function(){var e=Object(s.c)((function(e){return e.requestError})).errorStatus,t=Object(s.b)(),r=Object(y.g)();return Object(I.jsxs)("div",{className:"error_block",children:[Object(I.jsx)("span",{className:"error_block__status",children:e}),Object(I.jsx)("span",{className:"error_block__desc",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}),Object(I.jsx)("span",{className:"error_block__suggestion",children:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}),Object(I.jsx)(B,{type:"button",title:"\u041d\u0430\u0437\u0430\u0434",location:"request_error",onclick:function(){t({type:m}),r.goBack()}})]})};r(44);var je=function(){var e=Object(s.c)((function(e){return e.requestError})).isError;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(ue,{}),Object(I.jsxs)("div",{className:"app_content",children:[Object(I.jsx)(ce,{}),Object(I.jsx)("main",{children:e?Object(I.jsx)(de,{}):"Hello"}),Object(I.jsx)(se,{})]})]})};var he=function(){var e=Object(s.c)((function(e){return e.user})).isLogged,t=Object(s.b)();return Object(n.useEffect)((function(){if(!e){var r=localStorage.getItem("access_token");r&&$(r).then((function(e){return t(V(e.username))}))}}),[]),Object(I.jsx)("div",{className:"App",children:e?Object(I.jsx)(N.a,{basename:"need_for_drive-admin",children:Object(I.jsxs)(y.d,{children:[Object(I.jsx)(y.b,{exact:!0,path:"/",children:Object(I.jsx)(y.a,{to:"/admin"})}),Object(I.jsx)(y.b,{path:"/admin",component:je})]})}):Object(I.jsx)(re,{})})};c.a.render(Object(I.jsx)(s.a,{store:E,children:Object(I.jsx)(he,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.75340fc4.chunk.js.map