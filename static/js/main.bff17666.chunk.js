(this["webpackJsonpneed_for_drive-admin"]=this["webpackJsonpneed_for_drive-admin"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(20),s=n.n(r),o=(n(27),n(7)),i=n(14),l=n(2),u=n(8),j=n.n(u),d=(n(28),n(0));function b(e){var t=e.type,n=e.inputValue,c=e.setInputValue,a=e.label,r=e.placeholder,s=e.isError,o=e.setIsError,i=j()("input_field__value",{is_error:s}),l=j()("input_field__error",{active:s});return Object(d.jsxs)("div",{className:"input_field",children:[Object(d.jsx)("label",{htmlFor:"input_".concat(a),children:a}),Object(d.jsxs)("div",{className:i,children:[Object(d.jsx)("input",{type:t,name:a,id:"input_".concat(a),placeholder:r,value:n,onChange:function(e){return t=e.target.value,c(t),void(t.length&&o&&o(!1));var t}}),Object(d.jsx)("div",{className:l,children:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})]})]})}b.defaultProps={type:"",inputValue:"",setInputValue:null,label:"",placeholder:"",isError:!1,setIsError:null};var h=b,p=n(13);n(30);function _(e){var t=e.type,n=e.title,c=e.color,a=e.location,r=e.onclick,s=j()("btn","btn--".concat(a),Object(p.a)({},"btn--".concat(c),c));return Object(d.jsx)("input",{type:t,value:n,className:s,onClick:r})}_.defaultProps={type:"",title:"",color:"",location:"",onclick:null};var f=_,O=n(11),m=n.n(O),v=n(17),x=n(12),g="".concat("https://api-factory.simbirsoft1.com","/api/auth/login"),N={"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b"},k="QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890";function y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="";t.length<=e;)t+=k[Math.floor(Math.random()*k.length)];return t}function w(e,t){var n=t.headers?Object(x.a)(Object(x.a)({},t.headers),e):e;return Object(x.a)(Object(x.a)({},t),{},{headers:n})}var S=function(){var e=Object(v.a)(m.a.mark((function e(t){var n,c,a,r,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},c=w(N,n),e.prev=2,e.next=5,fetch(t,c);case 5:a=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u043c: ",e.t0),e.abrupt("return",Promise.reject(new Error(e.t0.message)));case 12:if(a.ok){e.next=17;break}return e.next=15,a.text();case 15:return r=e.sent,e.abrupt("return",Promise.reject({httpStatus:a.status,httpText:r}));case 17:return e.abrupt("return",a.json());case 18:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();function I(){return(I=Object(v.a)(m.a.mark((function e(t,n){var c,a,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=y(5,!0),a=window.btoa("".concat(c,":4cbcea96de")),r={headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(a)},body:JSON.stringify({username:t,password:n}),method:"POST"},e.next=5,S(g,r);case 5:return s=e.sent,e.abrupt("return",{access_token:s.access_token,refresh_token:s.refresh_token});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=n.p+"static/media/logo_icon.bc4f3ee8.svg";n(32);function V(e){var t=e.setToken,n=Object(c.useState)(""),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),l=Object(o.a)(i,2),u=l[0],b=l[1],p=Object(c.useState)(!1),_=Object(o.a)(p,2),O=_[0],m=_[1],v=Object(c.useState)(!1),x=Object(o.a)(v,2),g=x[0],N=x[1],k=Object(c.useState)(!1),y=Object(o.a)(k,2),w=y[0],S=y[1],V=Object(c.useState)(!1),T=Object(o.a)(V,2),P=T[0],C=T[1],A=j()("login_form__register_error",{active:O}),D=j()("login_form__auth_error",{active:P});return Object(c.useEffect)((function(){O&&setTimeout((function(){m(!1)}),2e3)}),[O]),Object(c.useEffect)((function(){P&&setTimeout((function(){C(!1)}),3e3)}),[P]),Object(d.jsxs)("div",{className:"login",children:[Object(d.jsxs)("div",{className:"login__head",children:[Object(d.jsx)("div",{className:"login__icon",children:Object(d.jsx)("img",{src:E,alt:"icon"})}),Object(d.jsx)("h1",{className:"login__heading",children:"Need for drive"})]}),Object(d.jsxs)("form",{className:"login_form",children:[Object(d.jsx)("h2",{className:"login_form__heading",children:"\u0412\u0445\u043e\u0434"}),Object(d.jsx)(h,{type:"text",inputValue:r,setInputValue:s,label:"\u041f\u043e\u0447\u0442\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",isError:g,setIsError:N}),Object(d.jsx)(h,{type:"password",inputValue:u,setInputValue:b,label:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",isError:w,setIsError:S}),Object(d.jsxs)("div",{className:"login_form__btns",children:[Object(d.jsx)("a",{href:"#!",className:"login_form__register",onClick:function(e){e.preventDefault(),m(!0)},children:"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(d.jsx)("div",{className:A,children:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430..."}),Object(d.jsx)(f,{type:"button",title:"\u0412\u043e\u0439\u0442\u0438",onclick:function(e){e.preventDefault(),r.length||N(!0),u.length||S(!0),r.length&&u.length&&function(e,t){return I.apply(this,arguments)}(r,u).then((function(e){var n;e.access_token&&localStorage.setItem("access_token",e.access_token),e.refresh_token&&localStorage.setItem("refresh_token",e.refresh_token),t(null!==(n=e.access_token)&&void 0!==n?n:null)})).catch((function(e){401===e.httpStatus&&(console.error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c! ",e),C(!0))}))}})]}),Object(d.jsx)("div",{className:D,children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"})]})]})}V.defaultProps={setToken:null};var T=V,P=n.p+"static/media/avatar.ee177700.jpg";n(33);var C=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(o.a)(r,2),i=s[0],l=s[1],u=j()("user_account__dropdown_icon",{active:i}),b=j()("user_account__dropdown_menu","dropdown_menu",{active:i}),p=function(){l((function(e){return!e}))};return Object(d.jsxs)("header",{className:"page_header",children:[Object(d.jsxs)("div",{className:"page_header__search search",children:[Object(d.jsx)("span",{className:"search__search_btn"}),Object(d.jsx)(h,{type:"search",inputValue:n,setInputValue:a,placeholder:"\u041f\u043e\u0438\u0441\u043a ..."})]}),Object(d.jsxs)("div",{className:"page_header__notifications notifications",children:[Object(d.jsx)("span",{className:"notifications__icon"}),Object(d.jsx)("div",{className:"notifications__count",children:"2"})]}),Object(d.jsxs)("div",{className:"page_header__user user_account",children:[Object(d.jsx)("img",{className:"user_account__avatar",src:P,alt:"user_avatar"}),Object(d.jsx)("span",{className:"user_account__name",children:"User"}),Object(d.jsx)("span",{role:"button",tabIndex:"0","aria-label":"dropdown menu",className:u,onClick:p,onKeyDown:p}),Object(d.jsx)("div",{className:b,children:Object(d.jsx)("ul",{className:"dropdown_menu__list",children:Object(d.jsx)("li",{className:"dropdown_menu__item",children:"\u0412\u044b\u0445\u043e\u0434"})})})]})]})};n(34);var A=function(){return Object(d.jsxs)("footer",{className:"page_footer",children:[Object(d.jsxs)("div",{className:"page_footer__links",children:[Object(d.jsx)(i.b,{to:"/admin",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"}),Object(d.jsx)("a",{href:"https://github.com/PVthfinder",target:"_blank",rel:"noreferrer",children:"GitHub"})]}),Object(d.jsxs)("div",{className:"page_footer__copyright",children:["Copyright \xa9 ",(new Date).getFullYear()," Simbirsoft"]})]})};var D=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(C,{}),Object(d.jsx)("main",{children:"Hello"}),Object(d.jsx)(A,{})]})};var F=function(){var e=Object(c.useState)(localStorage.getItem("access_token")),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(d.jsx)("div",{className:"App",children:n?Object(d.jsx)(i.a,{basename:"need_for_drive-admin",children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{exact:!0,path:"/",children:Object(d.jsx)(l.a,{to:"/admin"})}),Object(d.jsx)(l.b,{path:"/admin",component:D})]})}):Object(d.jsx)(T,{setToken:a})})};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(F,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.bff17666.chunk.js.map